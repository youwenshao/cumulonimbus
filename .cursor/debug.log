{"location":"demo-site/useAppData:useEffect","message":"useEffect starting","data":{"isLoading":true},"timestamp":1768821415772,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"demo-site/Page:render","message":"Component render","data":{"isLoading":true,"ordersCount":0},"timestamp":1768821415779,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"demo-site/Page:loadingCheck","message":"Checking isLoading condition","data":{"isLoading":true,"willShowLoading":true},"timestamp":1768821415780,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"demo-site/Page:showingLoading","message":"Showing loading screen","data":{},"timestamp":1768821415781,"sessionId":"debug-session","runId":"run1","hypothesisId":"A"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825025338,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825029684,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825035192,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/","url":"http://localhost:3001/","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825052856,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/auth/signin","url":"http://localhost:3001/auth/signin","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825058549,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825062167,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825063243,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825063265,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825063281,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/providers","url":"http://localhost:3001/api/auth/providers","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825071365,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/csrf","url":"http://localhost:3001/api/auth/csrf","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825071377,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/callback/credentials","url":"http://localhost:3001/api/auth/callback/credentials","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825071390,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825071872,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825071887,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825072196,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825072291,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825072371,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825072372,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825072377,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825072391,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-master-b519.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825074469,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-master-b519.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-master-b519&originalPath=%2F","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825074469,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-master-b519.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825074638,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-master-b519.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-master-b519&originalPath=%2F","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825074638,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-master-b519","host":"cha-chaan-teng-master-b519.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825074821,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-master-b519","host":"cha-chaan-teng-master-b519.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825074825,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Prisma lookup result","data":{"searchQuery":"cha-chaan-teng-master-b519","found":true,"realId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825074835,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e","codeLength":23222,"hasComponentFiles":false,"hasGeneratedCode":true},"timestamp":1768825074835,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e"},"timestamp":1768825074837,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready"},"timestamp":1768825075192,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready","hasCorrelation":false,"isPending":false},"timestamp":1768825075192,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onReady","message":"Received ready message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","expectedId":"cmkkxdjil0007qdlclhsiwb2e","match":true},"timestamp":1768825075193,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response"},"timestamp":1768825075209,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response","correlationId":"mc2cni","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng Master | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng Master...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkkxdjil0007qdlclhsiwb2e\",\n            name: \"Cha Chaan Teng Master\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"Master\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825075209,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-master-b519","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825075210,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response"},"timestamp":1768825075211,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response","correlationId":"0x3wgl","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng Master | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng Master...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkkxdjil0007qdlclhsiwb2e\",\n            name: \"Cha Chaan Teng Master\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"Master\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825075211,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-master-b519","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825075211,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-master-b519.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825093033,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-master-b519.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-master-b519&originalPath=%2F","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825093033,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-master-b519","host":"cha-chaan-teng-master-b519.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825093041,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Prisma lookup result","data":{"searchQuery":"cha-chaan-teng-master-b519","found":true,"realId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825093045,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e","codeLength":23222,"hasComponentFiles":false,"hasGeneratedCode":true},"timestamp":1768825093045,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e"},"timestamp":1768825093045,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready"},"timestamp":1768825093318,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready","hasCorrelation":false,"isPending":false},"timestamp":1768825093318,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onReady","message":"Received ready message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","expectedId":"cmkkxdjil0007qdlclhsiwb2e","match":true},"timestamp":1768825093319,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response"},"timestamp":1768825093334,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response","correlationId":"1gwapn","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng Master | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng Master...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkkxdjil0007qdlclhsiwb2e\",\n            name: \"Cha Chaan Teng Master\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"Master\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825093334,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-master-b519","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825093335,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-master-b519.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825097098,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-master-b519.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-master-b519&originalPath=%2F","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825097098,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-master-b519","host":"cha-chaan-teng-master-b519.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825097104,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Prisma lookup result","data":{"searchQuery":"cha-chaan-teng-master-b519","found":true,"realId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825097107,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e","codeLength":23222,"hasComponentFiles":false,"hasGeneratedCode":true},"timestamp":1768825097107,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e"},"timestamp":1768825097107,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready"},"timestamp":1768825097374,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready","hasCorrelation":false,"isPending":false},"timestamp":1768825097375,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onReady","message":"Received ready message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","expectedId":"cmkkxdjil0007qdlclhsiwb2e","match":true},"timestamp":1768825097375,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response"},"timestamp":1768825097391,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response","correlationId":"1cn11","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng Master | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng Master...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkkxdjil0007qdlclhsiwb2e\",\n            name: \"Cha Chaan Teng Master\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"Master\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825097391,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-master-b519","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825097391,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-master-b519.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825101273,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-master-b519.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-master-b519&originalPath=%2F","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825101273,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-master-b519","host":"cha-chaan-teng-master-b519.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825101278,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Prisma lookup result","data":{"searchQuery":"cha-chaan-teng-master-b519","found":true,"realId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519"},"timestamp":1768825101279,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e","codeLength":23222,"hasComponentFiles":false,"hasGeneratedCode":true},"timestamp":1768825101280,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkkxdjil0007qdlclhsiwb2e"},"timestamp":1768825101280,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready"},"timestamp":1768825101533,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"ready","hasCorrelation":false,"isPending":false},"timestamp":1768825101533,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onReady","message":"Received ready message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","expectedId":"cmkkxdjil0007qdlclhsiwb2e","match":true},"timestamp":1768825101533,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response"},"timestamp":1768825101549,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","type":"response","correlationId":"8zgtx7","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng Master | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng Master...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkkxdjil0007qdlclhsiwb2e\",\n            name: \"Cha Chaan Teng Master\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"Master\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825101549,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-master-b519","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825101550,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825106633,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825106906,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/_log","url":"http://localhost:3001/api/auth/_log","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825106913,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/create","url":"http://localhost:3001/create","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825108996,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/create","url":"http://localhost:3001/create","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825109954,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/temp-1768825113225","url":"http://localhost:3001/api/scaffolder/status/temp-1768825113225","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825113236,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825113736,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl4syzn0001104ja8x1giur","url":"http://localhost:3001/api/scaffolder/status/cmkl4syzn0001104ja8x1giur","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825116731,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825132917,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825137118,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825144648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/apps/cmkl4tkkb0003104jsilqd2ti","url":"http://localhost:3001/apps/cmkl4tkkb0003104jsilqd2ti?preview=true","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825151466,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156208,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/apps/cmkl4tkkb0003104jsilqd2ti/data","url":"http://localhost:3001/api/apps/cmkl4tkkb0003104jsilqd2ti/data","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156209,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156743,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156760,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156774,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156791,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825156809,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/apps/cmkl4tkkb0003104jsilqd2ti/data","url":"http://localhost:3001/api/apps/cmkl4tkkb0003104jsilqd2ti/data","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825157226,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/apps/cmkl4tkkb0003104jsilqd2ti","url":"http://localhost:3001/apps/cmkl4tkkb0003104jsilqd2ti","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160248,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/apps/cmkl4tkkb0003104jsilqd2ti","url":"http://localhost:3001/apps/cmkl4tkkb0003104jsilqd2ti","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160269,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/apps/cmkl4tkkb0003104jsilqd2ti/data","url":"http://localhost:3001/api/apps/cmkl4tkkb0003104jsilqd2ti/data","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160571,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160572,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160589,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/apps/cmkl4tkkb0003104jsilqd2ti/data","url":"http://localhost:3001/api/apps/cmkl4tkkb0003104jsilqd2ti/data","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825160598,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825162648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825162687,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825162688,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825162692,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825162705,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825165067,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768825165783,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825165783,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768825165788,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825165788,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825165797,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825165822,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825165846,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825165876,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825166821,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825166821,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":[]},"timestamp":1768825166968,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825166969,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":[]},"timestamp":1768825167371,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":[]},"timestamp":1768825167694,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825168648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825168648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"serve/route.ts","message":"Processing request","data":{"appId":"cha-chaan-teng-laoban-yard","host":"cha-chaan-teng-laoban-yard.localhost:3000","url":"http://localhost:3000/","searchParams":{}},"timestamp":1768825168660,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Prisma lookup result","data":{"searchQuery":"cha-chaan-teng-laoban-yard","found":true,"realId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825168662,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkl4tkkb0003104jsilqd2ti","codeLength":23238,"hasComponentFiles":false,"hasGeneratedCode":true},"timestamp":1768825168663,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:spawnWorker","message":"Spawning worker","data":{"workerPath":"/Users/youwen/Projects/cumulonimbus/src/lib/nebula/worker.ts","appId":"cmkl4tkkb0003104jsilqd2ti"},"timestamp":1768825168663,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","type":"ready"},"timestamp":1768825168991,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","type":"ready","hasCorrelation":false,"isPending":false},"timestamp":1768825168991,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onReady","message":"Received ready message","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","expectedId":"cmkl4tkkb0003104jsilqd2ti","match":true},"timestamp":1768825168992,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:onMessage","message":"Worker message","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","type":"response"},"timestamp":1768825169007,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"supervisor.ts:handleWorkerMessage","message":"Received message from worker","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","type":"response","correlationId":"zrgh2l","hasCorrelation":true,"isPending":true,"payload":{"status":200,"body":"\n<!DOCTYPE html>\n<html lang=\"en\" class=\"dark\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cha Chaan Teng LaoBan | Nebula</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react\": \"https://esm.sh/react@18.2.0\",\n        \"react-dom\": \"https://esm.sh/react-dom@18.2.0\",\n        \"react-dom/client\": \"https://esm.sh/react-dom@18.2.0/client\",\n        \"lucide-react\": \"https://esm.sh/lucide-react@0.468.0\",\n        \"framer-motion\": \"https://esm.sh/framer-motion@11.15.0\",\n        \"date-fns\": \"https://esm.sh/date-fns@3.6.0\",\n        \"clsx\": \"https://esm.sh/clsx@2.1.1\",\n        \"tailwind-merge\": \"https://esm.sh/tailwind-merge@2.6.0\",\n        \"recharts\": \"https://esm.sh/recharts@2.15.0\",\n        \"react-hook-form\": \"https://esm.sh/react-hook-form@7.54.0\",\n        \"zod\": \"https://esm.sh/zod@3.24.1\",\n        \"nanoid\": \"https://esm.sh/nanoid@5.0.7\",\n        \"@/lib/utils\": \"data:text/javascript,export function cn(...args){return args.filter(Boolean).join(' ')}\"\n      }\n    }\n    </script>\n    <script>\n        tailwind.config = {\n            darkMode: 'class',\n            theme: {\n                extend: {\n                    fontFamily: { sans: ['Inter', 'sans-serif'] },\n                    colors: {\n                        surface: { \n                          base: '#000000', \n                          elevated: '#111111', \n                          layer: '#1a1a1a' \n                        },\n                        text: { \n                          primary: '#ffffff', \n                          secondary: '#a1a1aa', \n                          tertiary: '#71717a' \n                        },\n                        accent: { \n                          yellow: '#facc15' \n                        },\n                        // Sync with main site tokens\n                        'surface-base': '#000000',\n                        'surface-layer': '#111111',\n                        'surface-elevated': '#1a1a1a',\n                        'text-primary': '#ffffff',\n                        'text-secondary': '#a1a1aa',\n                        'text-tertiary': '#71717a',\n                        'accent-yellow': '#facc15',\n                        'outline-light': '#2d2d2d',\n                        'outline-mid': '#3f3f46'\n                    }\n                }\n            }\n        }\n    </script>\n    <style>\n        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; margin: 0; padding: 0; overflow-x: hidden; }\n        ::-webkit-scrollbar { width: 8px; }\n        ::-webkit-scrollbar-track { background: #000; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }\n        #root { min-height: 100vh; }\n    </style>\n</head>\n<body class=\"bg-black text-white\">\n    <div id=\"root\">\n        <div class=\"h-screen flex items-center justify-center\">\n            <div class=\"text-center\">\n                <div class=\"w-12 h-12 border-2 border-accent-yellow border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                <p class=\"text-text-secondary animate-pulse\">Launching Cha Chaan Teng LaoBan...</p>\n            </div>\n        </div>\n    </div>\n\n    <script type=\"module\">\n        import React from 'react';\n        import ReactDOM from 'react-dom/client';\n        \n        // Mock Globals\n        window.React = React;\n        window.process = { env: { NODE_ENV: 'development' } };\n        \n        // Global Error Handling\n        window.onerror = (message, source, lineno, colno, error) => {\n          console.error('Nebula Runtime Error:', { message, source, lineno, colno, error });\n          return false;\n        };\n        window.onunhandledrejection = (event) => {\n          console.error('Nebula Unhandled Rejection:', event.reason);\n        };\n        \n        const APP_PROPS = {\n            appId: \"cmkl4tkkb0003104jsilqd2ti\",\n            name: \"Cha Chaan Teng LaoBan\",\n            description: \"A specialized order management system for a Hong Kong style tea restaurant.\",\n            initialData: []\n        };\n\n        // useAppData hook implementation\n        window.useAppData = () => {\n            const [data, setData] = React.useState(APP_PROPS.initialData);\n            const [isLoading, setIsLoading] = React.useState(false);\n            \n            const addRecord = async (record) => {\n                const newRecord = { ...record, id: Math.random().toString(36).substr(2, 9), createdAt: new Date().toISOString() };\n                setData(prev => [newRecord, ...prev]);\n                return newRecord;\n            };\n            \n            const updateRecord = async (id, updates) => {\n                setData(prev => prev.map(r => r.id === id ? { ...r, ...updates } : r));\n            };\n            \n            const deleteRecord = async (id) => {\n                setData(prev => prev.filter(r => r.id !== id));\n            };\n            \n            return { data, isLoading, addRecord, updateRecord, deleteRecord };\n        };\n\n        // App Component Injection\n        async function hydrate() {\n            try {\n                console.log('Nebula: Starting app injection');\n                const code = `import React, { useState, useMemo } from \"react\";\nimport {\n  Coffee,\n  Utensils,\n  Clock,\n  CheckCircle,\n  DollarSign,\n  ChefHat,\n  Plus,\n  TrendingUp,\n  AlertCircle\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nconst MENU_CATEGORIES = [\n  { id: \"set\", name: \"Set Meals\" },\n  { id: \"rice\", name: \"Rice/Noodles\" },\n  { id: \"drink\", name: \"Drinks\" },\n  { id: \"snack\", name: \"Snacks\" }\n];\nconst MENU_ITEMS = [\n  { id: \"1\", code: \"A1\", name: \"Satay Beef Noodles\", price: 48, category: \"set\" },\n  { id: \"2\", code: \"A2\", name: \"Spiced Pork Cubes Instant Noodles\", price: 46, category: \"set\" },\n  { id: \"3\", code: \"T1\", name: \"HK Style Milk Tea (Hot)\", price: 18, category: \"drink\" },\n  { id: \"4\", code: \"T2\", name: \"Lemon Tea (Iced)\", price: 22, category: \"drink\" },\n  { id: \"5\", code: \"C1\", name: \"Coffee (Hot)\", price: 18, category: \"drink\" },\n  { id: \"6\", code: \"YT\", name: \"Yuen Yeung (Coffee+Tea)\", price: 20, category: \"drink\" },\n  { id: \"7\", code: \"F1\", name: \"Pineapple Bun w/ Butter\", price: 16, category: \"snack\" },\n  { id: \"8\", code: \"F2\", name: \"French Toast\", price: 28, category: \"snack\" },\n  { id: \"9\", code: \"L1\", name: \"Baked Pork Chop Rice\", price: 58, category: \"rice\" },\n  { id: \"10\", code: \"L2\", name: \"Yangzhou Fried Rice\", price: 52, category: \"rice\" }\n];\nconst TABLES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"A1\", \"A2\", \"B1\", \"B2\"];\nfunction App() {\n  const { data: orders, addRecord, updateRecord, deleteRecord, isLoading } = useAppData();\n  const [activeTab, setActiveTab] = useState(\"kitchen\");\n  const [showNewOrder, setShowNewOrder] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const activeOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status !== \"paid\").sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [orders]);\n  const completedOrders = useMemo(() => {\n    if (!orders) return [];\n    return orders.filter((o) => o.status === \"paid\");\n  }, [orders]);\n  const dailyRevenue = useMemo(() => {\n    return completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);\n  }, [completedOrders]);\n  const pendingCount = activeOrders.filter((o) => o.status === \"pending\").length;\n  const handleStatusUpdate = (orderId, currentStatus) => {\n    let nextStatus = \"pending\";\n    if (currentStatus === \"pending\") nextStatus = \"cooking\";\n    else if (currentStatus === \"cooking\") nextStatus = \"served\";\n    else if (currentStatus === \"served\") nextStatus = \"paid\";\n    updateRecord(orderId, { status: nextStatus });\n  };\n  if (isLoading) {\n    return /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-center min-h-screen bg-black text-white\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-col items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 border-4 border-accent-yellow border-t-transparent rounded-full animate-spin\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400\" }, \"Loading Kitchen System...\")));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"min-h-screen bg-black text-text-primary font-sans selection:bg-accent-yellow/30\" }, /* @__PURE__ */ React.createElement(\"nav\", { className: \"border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center justify-between h-16\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-yellow to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/20\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-5 h-5 text-white\" })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h1\", { className: \"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400\" }, \"Cha Chaan Teng \", /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow\" }, \"LaoBan\")))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"hidden md:flex items-center gap-6 text-sm font-medium text-gray-400\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Clock, { className: \"w-4 h-4 text-accent-yellow\" }), /* @__PURE__ */ React.createElement(\"span\", null, (/* @__PURE__ */ new Date()).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }))), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(DollarSign, { className: \"w-4 h-4 text-green-500\" }), /* @__PURE__ */ React.createElement(\"span\", null, \"\\$\", dailyRevenue))), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => setShowNewOrder(true),\n      className: \"bg-accent-yellow hover:bg-accent-yellow/90 text-black px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all active:scale-95\"\n    },\n    /* @__PURE__ */ React.createElement(Plus, { className: \"w-4 h-4\" }),\n    /* @__PURE__ */ React.createElement(\"span\", null, \"New Order\")\n  ))))), /* @__PURE__ */ React.createElement(\"main\", { className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\" }, /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Pending Orders\",\n      value: pendingCount,\n      icon: AlertCircle,\n      color: \"text-orange-500\",\n      bg: \"bg-orange-500/10\",\n      border: \"border-orange-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Active Tables\",\n      value: \\`\\${new Set(activeOrders.map((o) => o.tableId)).size} / \\${TABLES.length}\\`,\n      icon: Utensils,\n      color: \"text-blue-500\",\n      bg: \"bg-blue-500/10\",\n      border: \"border-blue-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Orders Served\",\n      value: activeOrders.filter((o) => o.status === \"served\").length,\n      icon: CheckCircle,\n      color: \"text-green-500\",\n      bg: \"bg-green-500/10\",\n      border: \"border-green-500/20\"\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MetricCard,\n    {\n      title: \"Daily Revenue\",\n      value: \\`\\$\\${dailyRevenue}\\`,\n      icon: TrendingUp,\n      color: \"text-accent-yellow\",\n      bg: \"bg-accent-yellow/10\",\n      border: \"border-accent-yellow/20\"\n    }\n  )), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-4 mb-6 border-b border-gray-800 pb-1\" }, /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"kitchen\", onClick: () => setActiveTab(\"kitchen\"), icon: ChefHat, label: \"Kitchen View\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"tables\", onClick: () => setActiveTab(\"tables\"), icon: Utensils, label: \"Table Map\" }), /* @__PURE__ */ React.createElement(TabButton, { active: activeTab === \"history\", onClick: () => setActiveTab(\"history\"), icon: Clock, label: \"History\" })), /* @__PURE__ */ React.createElement(AnimatePresence, { mode: \"wait\" }, activeTab === \"kitchen\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"kitchen\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\"\n    },\n    activeOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"col-span-full flex flex-col items-center justify-center py-20 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl\" }, /* @__PURE__ */ React.createElement(Coffee, { className: \"w-12 h-12 mb-4 opacity-50\" }), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-lg\" }, \"No active orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-sm\" }, \"Wait for new customers or create an order\")) : activeOrders.map((order) => /* @__PURE__ */ React.createElement(\n      OrderCard,\n      {\n        key: order.id,\n        order,\n        onStatusUpdate: handleStatusUpdate,\n        onDelete: deleteRecord\n      }\n    ))\n  ), activeTab === \"tables\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"tables\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n    },\n    TABLES.map((tableId) => {\n      const tableOrders = activeOrders.filter((o) => o.tableId === tableId);\n      const isOccupied = tableOrders.length > 0;\n      const hasPending = tableOrders.some((o) => o.status === \"pending\");\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: tableId,\n          className: cn(\n            \"aspect-square rounded-xl p-4 flex flex-col justify-between border transition-all cursor-pointer hover:scale-105\",\n            isOccupied ? \"bg-gray-800 border-gray-700\" : \"bg-gray-900/50 border-gray-800 hover:border-gray-700 opacity-70\"\n          ),\n          onClick: () => {\n            if (!isOccupied) {\n              setShowNewOrder(true);\n            }\n          }\n        },\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-gray-200\" }, tableId), isOccupied && /* @__PURE__ */ React.createElement(\"div\", { className: cn(\n          \"w-3 h-3 rounded-full\",\n          hasPending ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\n        ) })),\n        /* @__PURE__ */ React.createElement(\"div\", { className: \"text-xs text-gray-400\" }, isOccupied ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"p\", null, tableOrders.length, \" orders\"), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-accent-yellow mt-1\" }, \"\\$\", tableOrders.reduce((s, o) => s + o.total, 0))) : \"Empty\")\n      );\n    })\n  ), activeTab === \"history\" && /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      key: \"history\",\n      initial: { opacity: 0, y: 10 },\n      animate: { opacity: 1, y: 0 },\n      exit: { opacity: 0, y: -10 },\n      className: \"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"overflow-x-auto\" }, /* @__PURE__ */ React.createElement(\"table\", { className: \"w-full text-left text-sm\" }, /* @__PURE__ */ React.createElement(\"thead\", { className: \"bg-gray-900 text-gray-400\" }, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Order ID\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Table\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Items\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Time\"), /* @__PURE__ */ React.createElement(\"th\", { className: \"px-6 py-4 font-medium\" }, \"Status\"))), /* @__PURE__ */ React.createElement(\"tbody\", { className: \"divide-y divide-gray-800\" }, completedOrders.length === 0 ? /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: 6, className: \"px-6 py-8 text-center text-gray-500\" }, \"No completed orders yet\")) : completedOrders.map((order) => /* @__PURE__ */ React.createElement(\"tr\", { key: order.id, className: \"hover:bg-gray-800/50 transition-colors\" }, /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-mono text-xs text-gray-500\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-bold\" }, order.tableId), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-300 max-w-xs truncate\" }, order.items), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 font-medium text-accent-yellow\" }, \"\\$\", order.total), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4 text-gray-400\" }, format(new Date(order.createdAt), \"HH:mm\")), /* @__PURE__ */ React.createElement(\"td\", { className: \"px-6 py-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"px-2 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20\" }, \"Paid\")))))))\n  ))), /* @__PURE__ */ React.createElement(AnimatePresence, null, showNewOrder && /* @__PURE__ */ React.createElement(\n    NewOrderModal,\n    {\n      onClose: () => setShowNewOrder(false),\n      onSubmit: (data) => {\n        addRecord({\n          ...data,\n          status: \"pending\",\n          total: data.total\n          // Calculated in modal\n        });\n        setShowNewOrder(false);\n      }\n    }\n  )));\n}\nfunction MetricCard({ title, value, icon: Icon, color, bg, border }) {\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"bg-gray-900/50 backdrop-blur-sm border rounded-xl p-5 flex items-start justify-between\", border) }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"p\", { className: \"text-gray-400 text-sm font-medium mb-1\" }, title), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-2xl font-bold text-gray-100\" }, value)), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"p-2 rounded-lg\", bg) }, /* @__PURE__ */ React.createElement(Icon, { className: cn(\"w-5 h-5\", color) })));\n}\nfunction TabButton({ active, onClick, icon: Icon, label }) {\n  return /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick,\n      className: cn(\n        \"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all\",\n        active ? \"bg-gray-800 text-white shadow-sm\" : \"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50\"\n      )\n    },\n    /* @__PURE__ */ React.createElement(Icon, { className: \"w-4 h-4\" }),\n    label\n  );\n}\nfunction OrderCard({ order, onStatusUpdate, onDelete }) {\n  const statusColors = {\n    pending: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n    cooking: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n    served: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    paid: \"bg-gray-500/10 text-gray-400 border-gray-500/20\"\n  };\n  const statusActionLabel = {\n    pending: \"Start Cooking\",\n    cooking: \"Serve Order\",\n    served: \"Mark Paid\",\n    paid: \"Archive\"\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"bg-gray-900 border border-gray-800 rounded-xl p-5 flex flex-col h-full hover:border-gray-700 transition-colors\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-start mb-4\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-lg border border-gray-700\" }, order.tableId), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-sm text-gray-400\" }, \"#\", order.id.slice(-4)), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs text-gray-500\" }, \"\\u2022 \", format(new Date(order.createdAt), \"HH:mm\"))), /* @__PURE__ */ React.createElement(\"div\", { className: cn(\"text-xs font-medium px-2 py-0.5 rounded-full mt-1 border w-fit\", statusColors[order.status]) }, order.status.toUpperCase()))), /* @__PURE__ */ React.createElement(\"p\", { className: \"text-xl font-bold text-accent-yellow\" }, \"\\$\", order.total)), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 bg-gray-800/50 rounded-lg p-3 mb-4 text-sm text-gray-200 leading-relaxed whitespace-pre-line\" }, order.items), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 mt-auto\" }, /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onStatusUpdate(order.id, order.status),\n      className: \"flex-1 bg-white text-black hover:bg-gray-200 py-2 rounded-lg text-sm font-medium transition-colors\"\n    },\n    statusActionLabel[order.status]\n  ), /* @__PURE__ */ React.createElement(\n    \"button\",\n    {\n      onClick: () => onDelete(order.id),\n      className: \"px-3 py-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\n    },\n    /* @__PURE__ */ React.createElement(\"span\", { className: \"sr-only\" }, \"Cancel\"),\n    /* @__PURE__ */ React.createElement(\"svg\", { className: \"w-5 h-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, /* @__PURE__ */ React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))\n  )));\n}\nfunction NewOrderModal({ onClose, onSubmit }) {\n  const [tableId, setTableId] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const addToCart = (item) => {\n    setCart((prev) => [...prev, item]);\n  };\n  const removeFromCart = (index) => {\n    setCart((prev) => prev.filter((_, i) => i !== index));\n  };\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!tableId || cart.length === 0) return;\n    const itemCounts = cart.reduce((acc, item) => {\n      acc[item.name] = (acc[item.name] || 0) + 1;\n      return acc;\n    }, {});\n    const itemsText = Object.entries(itemCounts).map(([name, count]) => count > 1 ? \\`\\${count}x \\${name}\\` : name).join(\"\\n\");\n    onSubmit({\n      tableId,\n      items: itemsText,\n      total: cartTotal,\n      createdAt: (/* @__PURE__ */ new Date()).toISOString()\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: \"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4\" }, /* @__PURE__ */ React.createElement(\n    motion.div,\n    {\n      initial: { opacity: 0, scale: 0.95 },\n      animate: { opacity: 1, scale: 1 },\n      exit: { opacity: 0, scale: 0.95 },\n      className: \"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-900 sticky top-0\" }, /* @__PURE__ */ React.createElement(\"h2\", { className: \"text-xl font-bold flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Plus, { className: \"w-5 h-5 text-accent-yellow\" }), \"New Order\"), /* @__PURE__ */ React.createElement(\"button\", { onClick: onClose, className: \"text-gray-400 hover:text-white\" }, \"\\u2715\")),\n    /* @__PURE__ */ React.createElement(\"div\", { className: \"flex flex-1 min-h-0\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 p-6 overflow-y-auto border-r border-gray-800\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"mb-6\" }, /* @__PURE__ */ React.createElement(\"label\", { className: \"block text-sm text-gray-400 mb-2\" }, \"Table Number\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex gap-2 flex-wrap\" }, TABLES.map((t) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: t,\n        onClick: () => setTableId(t),\n        className: cn(\n          \"w-10 h-10 rounded-lg text-sm font-bold transition-all\",\n          tableId === t ? \"bg-accent-yellow text-black\" : \"bg-gray-800 text-gray-300 hover:bg-gray-700\"\n        )\n      },\n      t\n    )))), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"h3\", { className: \"text-sm text-gray-400 mb-3 uppercase tracking-wider font-semibold\" }, \"Menu\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\" }, MENU_ITEMS.map((item) => /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        key: item.id,\n        onClick: () => addToCart(item),\n        className: \"flex items-center justify-between p-3 bg-gray-800/50 hover:bg-gray-800 border border-gray-800 hover:border-gray-700 rounded-xl transition-all text-left group\"\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-xs font-mono text-gray-500 bg-gray-900 px-1.5 py-0.5 rounded\" }, item.code), /* @__PURE__ */ React.createElement(\"span\", { className: \"font-medium text-gray-200 group-hover:text-white\" }, item.name))),\n      /* @__PURE__ */ React.createElement(\"span\", { className: \"text-accent-yellow font-bold\" }, \"\\$\", item.price)\n    ))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"w-80 bg-gray-900/50 p-6 flex flex-col border-l border-gray-800\" }, /* @__PURE__ */ React.createElement(\"h3\", { className: \"font-bold mb-4 flex items-center gap-2\" }, /* @__PURE__ */ React.createElement(Utensils, { className: \"w-4 h-4 text-gray-400\" }), \"Current Order\"), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex-1 overflow-y-auto space-y-3 mb-4\" }, cart.length === 0 ? /* @__PURE__ */ React.createElement(\"div\", { className: \"text-center py-10 text-gray-500 text-sm\" }, \"Select items from the menu\") : cart.map((item, idx) => /* @__PURE__ */ React.createElement(\"div\", { key: idx, className: \"flex justify-between items-center text-sm bg-gray-800 p-2 rounded-lg\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"truncate flex-1 pr-2\" }, item.name), /* @__PURE__ */ React.createElement(\"div\", { className: \"flex items-center gap-3\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"\\$\", item.price), /* @__PURE__ */ React.createElement(\"button\", { onClick: () => removeFromCart(idx), className: \"text-gray-500 hover:text-red-400\" }, \"\\xD7\"))))), /* @__PURE__ */ React.createElement(\"div\", { className: \"border-t border-gray-800 pt-4 mt-auto\" }, /* @__PURE__ */ React.createElement(\"div\", { className: \"flex justify-between items-center mb-4\" }, /* @__PURE__ */ React.createElement(\"span\", { className: \"text-gray-400\" }, \"Total\"), /* @__PURE__ */ React.createElement(\"span\", { className: \"text-2xl font-bold text-accent-yellow\" }, \"\\$\", cartTotal)), /* @__PURE__ */ React.createElement(\n      \"button\",\n      {\n        onClick: handleSubmit,\n        disabled: !tableId || cart.length === 0,\n        className: \"w-full py-3 bg-white text-black rounded-xl font-bold hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n      },\n      \"Send to Kitchen\"\n    ))))\n  ));\n}\nvar stdin_default = App;\nexport {\n  stdin_default as default\n};\n`;\n                const blob = new Blob([code], { type: 'text/javascript' });\n                const url = URL.createObjectURL(blob);\n                \n                const module = await import(url);\n                const AppToRender = module.default || module.App || Object.values(module).find(v => typeof v === 'function');\n                \n                if (!AppToRender) throw new Error('Could not find App component in module exports');\n\n                const root = ReactDOM.hydrateRoot(document.getElementById('root'), React.createElement(AppToRender, APP_PROPS));\n                console.log('Nebula: App hydration triggered');\n            } catch (err) {\n                console.error('Nebula Hydration Error:', err);\n                // Fallback to render if hydration fails or if no SSR was present\n                try {\n                  const root = ReactDOM.createRoot(document.getElementById('root'));\n                  root.render(React.createElement(AppToRender, APP_PROPS));\n                } catch (e) {}\n            }\n        }\n        \n        hydrate();\n    </script>\n</body>\n</html>\n        ","headers":{"Content-Type":"text/html"}}},"timestamp":1768825169008,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"serve/route.ts","message":"Response from supervisor","data":{"appId":"cha-chaan-teng-laoban-yard","responseStatus":200,"hasBody":true,"bodyLength":29592},"timestamp":1768825169008,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H4"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825829702,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825829702,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825829750,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825829750,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825830081,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825830411,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825830438,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825958301,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825958301,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825958335,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825958602,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825958602,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825959067,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825959242,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/_log","url":"http://localhost:3000/api/auth/_log","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825959247,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/_log","url":"http://localhost:3000/api/auth/_log","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825959258,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825964160,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825964160,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825964197,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825964197,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825964204,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825964789,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825964895,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825964940,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825964969,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/_log","url":"http://localhost:3000/api/auth/_log","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825964977,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/_log","url":"http://localhost:3000/api/auth/_log","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825965009,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768825965659,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825965660,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768825965663,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768825965663,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825965670,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825965856,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825965861,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825965898,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825965913,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825983620,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825983620,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825983646,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825983648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825983648,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825984060,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825984075,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825992199,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825992199,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825992214,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825992214,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825992225,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825992225,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825992671,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825992920,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825992934,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825996413,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825996413,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825996454,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768825996454,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768825996732,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825997005,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/api/auth/session","url":"http://localhost:3000/api/auth/session","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768825997024,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768826002776,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768826002776,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"cha-chaan-teng-laoban-yard.localhost:3000","pathname":"/","url":"http://localhost:3000/","cookies":["next-auth.callback-url","next-auth.csrf-token"]},"timestamp":1768826002803,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Rewriting subdomain request","data":{"from":"cha-chaan-teng-laoban-yard.localhost:3000/","to":"http://localhost:3000/api/nebula/serve?appId=cha-chaan-teng-laoban-yard&originalPath=%2F","subdomain":"cha-chaan-teng-laoban-yard"},"timestamp":1768826002803,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826003114,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826011773,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826215164,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826216937,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/dashboard","url":"http://localhost:3001/dashboard","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826222220,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768826228924,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768826228925,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkl4tkkb0003104jsilqd2ti","subdomain":"cha-chaan-teng-laoban-yard","liveUrl":"http://cha-chaan-teng-laoban-yard.localhost:3000"},"timestamp":1768826228928,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"DashboardContent.tsx:AppCard","message":"Generated liveUrl","data":{"appId":"cmkkxdjil0007qdlclhsiwb2e","subdomain":"cha-chaan-teng-master-b519","liveUrl":"http://cha-chaan-teng-master-b519.localhost:3000"},"timestamp":1768826228928,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H1"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826228944,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826228996,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826229026,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826229063,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/create","url":"http://localhost:3001/create","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826230951,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/create","url":"http://localhost:3001/create","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826231808,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826233021,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826233021,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/demo-1768826233015","url":"http://localhost:3001/api/scaffolder/status/demo-1768826233015","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826233022,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl5gx6i0001dvc91x5ttl64","url":"http://localhost:3001/api/scaffolder/status/cmkl5gx6i0001dvc91x5ttl64","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826234118,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl5gyh60003dvc9kmr16q45","url":"http://localhost:3001/api/scaffolder/status/cmkl5gyh60003dvc9kmr16q45","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826235793,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/code-stream/cmkl5gyh60003dvc9kmr16q45","url":"http://localhost:3001/api/scaffolder/code-stream/cmkl5gyh60003dvc9kmr16q45","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826241626,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/code-stream/cmkl5gyh60003dvc9kmr16q45","url":"http://localhost:3001/api/scaffolder/code-stream/cmkl5gyh60003dvc9kmr16q45","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826501886,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl5gyh60003dvc9kmr16q45","url":"http://localhost:3001/api/scaffolder/status/cmkl5gyh60003dvc9kmr16q45","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826501886,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl5gx6i0001dvc91x5ttl64","url":"http://localhost:3001/api/scaffolder/status/cmkl5gx6i0001dvc91x5ttl64","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768826501887,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827578609,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827578714,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/create","url":"http://localhost:3001/create","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827584960,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827585490,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827585505,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827585516,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/auth/session","url":"http://localhost:3001/api/auth/session","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827585527,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827589811,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/demo-1768827589805","url":"http://localhost:3001/api/scaffolder/status/demo-1768827589805","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827589811,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder","url":"http://localhost:3001/api/scaffolder","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827589812,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl69zco0007dvc952uc8hsi","url":"http://localhost:3001/api/scaffolder/status/cmkl69zco0007dvc952uc8hsi","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827589957,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/status/cmkl69zco0005dvc9zf15jyh9","url":"http://localhost:3001/api/scaffolder/status/cmkl69zco0005dvc9zf15jyh9","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827589958,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
{"location":"middleware.ts","message":"Incoming request","data":{"host":"localhost:3001","pathname":"/api/scaffolder/code-stream/cmkl69zco0005dvc9zf15jyh9","url":"http://localhost:3001/api/scaffolder/code-stream/cmkl69zco0005dvc9zf15jyh9","cookies":["next-auth.csrf-token","next-auth.callback-url","next-auth.session-token"]},"timestamp":1768827597467,"sessionId":"debug-session","runId":"subdomain-fix","hypothesisId":"H3"}
